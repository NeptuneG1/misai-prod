<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CODM Map Veto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
    }
    header {
      background: #222;
      padding: 15px;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      border-bottom: 3px solid #444;
    }
    .top-controls {
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px;
      background: #1a1a1a;
    }
    .team-box {
      text-align: center;
    }
    .team-box input {
      font-size: 1.2rem;
      text-align: center;
      background: transparent;
      color: #fff;
      border: none;
      border-bottom: 2px solid #555;
      padding: 5px;
    }
    .format-select select,
    .mode-select select {
      background: #222;
      color: #fff;
      padding: 5px 10px;
      font-size: 1rem;
    }
    .veto-row {
      display: flex;
      justify-content: space-between;
      padding: 20px;
    }
    .ban-panel {
      width: 20%;
      text-align: center;
    }
    .ban-panel img {
      width: 100%;
      border: 2px solid red;
      border-radius: 5px;
      margin-top: 10px;
    }
    .ban-panel div.ban-slot {
      height: 100px;
      border: 2px dashed red;
      border-radius: 5px;
      margin-top: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 0.9rem;
      color: #999;
    }
    .map-preview {
      width: 60%;
      text-align: center;
    }
    .map-preview img {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      border-radius: 10px;
      border: 3px solid #444;
    }
    .series-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 20px;
      background: #000;
      flex-wrap: wrap;
    }
    .series-slot {
      background: #1c1c1c;
      color: #ffd700;
      width: 160px;
      height: 100px;
      border: 2px solid #666;
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      padding: 10px;
      position: relative;
    }
    .series-slot .side {
      position: absolute;
      bottom: 5px;
      width: 100%;
      font-size: 0.8rem;
      color: #ccc;
    }
    .map-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      padding: 20px;
    }
    .map-card {
      width: 180px;
      background: #222;
      border-radius: 8px;
      border: 2px solid #444;
      cursor: pointer;
      transition: 0.2s;
    }
    .map-card:hover {
      transform: scale(1.05);
      border-color: #00bfff;
    }
    .map-card img {
      width: 100%;
      border-radius: 8px 8px 0 0;
    }
    .map-card div {
      padding: 5px;
      text-align: center;
    }
    .map-card.disabled {
      opacity: 0.4;
      pointer-events: none;
      filter: grayscale(80%);
    }
  </style>
</head>
<body>
  <header>CODM MAP VETO</header>

  <div class="top-controls">
    <div class="team-box">
      <div><strong>Team 1 (Blue)</strong></div>
      <input id="team1Name" placeholder="Team 1 Name" />
    </div>

    <div class="mode-select">
      <label>Mode:</label><br>
      <select id="modeSelect">
        <option value="hardpoint" selected>Hardpoint</option>
        <option value="snd">Search and Destroy</option>
        <option value="control">Control</option>
      </select>
    </div>

    <div class="format-select">
      <label>Match Format:</label><br>
      <select id="format">
        <option value="bo3">Best of 3</option>
        <option value="bo5" selected>Best of 5</option>
        <option value="bo7">Best of 7</option>
        <option value="gfbo7">Grand Finals BO7 + Advantage</option>
      </select>
    </div>

    <div class="team-box">
      <div><strong>Team 2 (Red)</strong></div>
      <input id="team2Name" placeholder="Team 2 Name" />
    </div>
  </div>

  <div class="veto-row">
    <div class="ban-panel" id="banLeft">
      <div>BANS (BLUE)</div>
      <div class="ban-slot" onclick="setBan('left')">Click to Ban</div>
    </div>
    <div class="map-preview">
      <img id="mainPreview" src="https://i.imgur.com/U4aFFoi.png" alt="map preview"/>
    </div>
    <div class="ban-panel" id="banRight">
      <div>BANS (RED)</div>
      <div class="ban-slot" onclick="setBan('right')">Click to Ban</div>
    </div>
  </div>

  <div class="series-row" id="seriesRow"></div>
  <div class="map-grid" id="mapGrid"></div>

  <script>
    const mapPools = {
      hardpoint: [
        { name: "Summit", url: "https://i.imgur.com/XMmudAS.png" },
        { name: "Apocalypse", url: "https://i.imgur.com/0zGGSqM.png" },
        { name: "Hacienda", url: "https://i.imgur.com/u4ppFlW.png" },
        { name: "Slums", url: "https://i.imgur.com/U4aFFoi.png" },
        { name: "Combine", url: "https://i.imgur.com/zv4Ffz2.png" }
      ],
      snd: [
        { name: "Tunisia", url: "https://i.imgur.com/bDsFBor.png" },
        { name: "Firing Range", url: "https://i.imgur.com/NCxsY60.png" },
        { name: "Kurohana Metropolis", url: "https://i.imgur.com/gichuj1.png" },
        { name: "Standoff", url: "https://i.imgur.com/tT7ulSk.png" },
        { name: "Coastal", url: "https://i.imgur.com/JStaBHR.png" }
      ],
      control: [
        { name: "Raid", url: "https://i.imgur.com/URdHUyt.png" },
        { name: "Take Off", url: "https://i.imgur.com/krTgidC.png" },
        { name: "Crossfire", url: "https://i.imgur.com/TjMmMNJ.png" }
      ]
    };

    let currentMode = 'hardpoint';
    let selectedBans = { left: null, right: null };
    let selectedMaps = [];

    function renderSeries() {
      const container = document.getElementById('seriesRow');
      const format = document.getElementById('format').value;
      let count = format === 'bo3' ? 3 : (format === 'bo5' ? 5 : 7);
      container.innerHTML = '';
      for (let i = 0; i < count; i++) {
        const div = document.createElement('div');
        div.className = 'series-slot';
        div.setAttribute('data-index', i);
        div.innerHTML = `Series ${i + 1}<div class="side">Side: ${i % 2 === 0 ? 'Blue' : 'Red'}</div>`;
        container.appendChild(div);
      }
    }

    function renderMapGrid() {
      const grid = document.getElementById('mapGrid');
      grid.innerHTML = '';
      mapPools[currentMode].forEach(map => {
        const isUsed = selectedMaps.includes(map.name) || Object.values(selectedBans).includes(map.name);
        const card = document.createElement('div');
        card.className = 'map-card' + (isUsed ? ' disabled' : '');
        card.innerHTML = `<img src="${map.url}" /><div>${map.name}</div>`;
        if (!isUsed) {
          card.onclick = () => handleMapClick(map);
        }
        grid.appendChild(card);
      });
    }

    function handleMapClick(map) {
      const preview = document.getElementById('mainPreview');
      preview.src = map.url;

      const emptySlot = [...document.querySelectorAll('.series-slot')]
        .find(el => !el.dataset.map);
      if (emptySlot) {
        emptySlot.dataset.map = map.name;
        emptySlot.innerHTML = `${map.name}<div class="side">Side: ${emptySlot.querySelector('.side').textContent.split(':')[1].trim()}</div>`;
        selectedMaps.push(map.name);
        renderMapGrid();
      }
    }

    function setBan(team) {
      const empty = document.querySelector(`#ban${team === 'left' ? 'Left' : 'Right'} .ban-slot`);
      empty.textContent = 'Click a map to ban...';
      [...document.querySelectorAll('.map-card')].forEach(card => {
        if (!card.classList.contains('disabled')) {
          card.onclick = () => {
            const mapName = card.querySelector('div').textContent;
            selectedBans[team] = mapName;
            empty.innerHTML = mapName;
            selectedMaps.push(mapName);
            renderMapGrid();
          };
        }
      });
    }

    document.getElementById('modeSelect').addEventListener('change', (e) => {
      currentMode = e.target.value;
      selectedMaps = [];
      selectedBans = { left: null, right: null };
      document.querySelectorAll('.ban-slot').forEach(slot => slot.innerHTML = 'Click to Ban');
      renderSeries();
      renderMapGrid();
    });

    document.getElementById('format').addEventListener('change', () => {
      renderSeries();
      renderMapGrid();
    });

    renderSeries();
    renderMapGrid();
  </script>
</body>
</html>
